{% include 'header.html' %}

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper" xmlns="http://www.w3.org/1999/html">
    <!-- Content Header (Page header) -->
    <div class="content-header">
        <div class="container">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1 class="m-0">
                        <small>API 安全项目视图</small>
                    </h1>
                </div><!-- /.col -->
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item active">API Safe Project View</li>
                    </ol>
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->
    <!-- Main content -->
    <div class="content">
        <div class="container">
            <div class="row">
                {% for entry in entries %}
                {% if '1' in session['purview'] %}
                <div class="col-lg-5">
                    <!--<div class="card card-primary card-outline">-->
                    <div class="card card-outline">
                        <div class="card-header">
                            <h5 class="card-title m-0">{{ entry.project_name }}</h5>
                        </div>
                        <div class="card-body">
                            {% if entry.project_description %}
                            项目描述: {{ entry.project_description }}<br>
                            {% else %}
                            项目描述: Good job :)<br>
                            {% endif %}
                            {% if entry.attack_type == '0' %}
                            攻击类型: 收集并探测<br>
                            {% elif entry.attack_type == '1' %}
                            攻击类型: 仅收集<br>
                            {% endif %}
                            {% if entry.no_api_scan == '0' %}
                            接口漏洞探测: 开启<br>
                            {% elif entry.no_api_scan == '1' %}
                            接口漏洞探测: 关闭<br>
                            {% endif %}
                            {% if entry.chrome == 'on' %}
                            Chrome 交互渲染: 开启<br>
                            {% elif entry.chrome == 'off' %}
                            Chrome 交互渲染: 关闭<br>
                            {% endif %}
                            创建人: {{ entry.account }}<br>
                            创建时间: {{ entry.date }}<br><br>
                            <a href="/ChkAPIRet/{{ entry.project_id }}" class="btn btn-default">查看项目</a>
                        </div>
                    </div>
                </div>
                {% elif session['account'] == entry.account %}
                <div class="col-lg-5">
                    <!--<div class="card card-primary card-outline">-->
                    <div class="card card-outline">
                        <div class="card-header">
                            <h5 class="card-title m-0">{{ entry.project_name }}</h5>
                        </div>
                        <div class="card-body">
                            {% if entry.project_description %}
                            项目描述: {{ entry.project_description }}<br>
                            {% else %}
                            项目描述: Good job :)<br>
                            {% endif %}
                            {% if entry.attack_type == '0' %}
                            攻击类型: 收集并探测<br>
                            {% elif entry.attack_type == '1' %}
                            攻击类型: 仅收集<br>
                            {% endif %}
                            {% if entry.no_api_scan == '0' %}
                            接口漏洞探测: 开启<br>
                            {% elif entry.no_api_scan == '1' %}
                            接口漏洞探测: 关闭<br>
                            {% endif %}
                            {% if entry.chrome == 'on' %}
                            Chrome 交互渲染: 开启<br>
                            {% elif entry.chrome == 'off' %}
                            Chrome 交互渲染: 关闭<br>
                            {% endif %}
                            创建人: {{ entry.account }}<br>
                            创建时间: {{ entry.date }}<br><br>
                            <a href="/ChkAPIRet/{{ entry.project_id }}" class="btn btn-default">查看项目</a>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
                <!-- /.col-md-6 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-sm-12 col-md-5">
                    <div class="dataTables_info" id="example2_info" role="status" aria-live="polite">
                        显示{{ page_size }}个项目
                    </div>
                </div>
                <div class="col-sm-12 col-md-7">
                    <div class="dataTables_paginate paging_simple_numbers" id="example2_paginate">
                        <ul class="pagination">
                            {% if page %}
                            {% if page > 1 %}
                            <li class="paginate_button page-item previous">
                                <a href="/ChkAPIProjectView/{{ page - 1 }}" aria-controls="example2" data-dt-idx="0" tabindex="0" class="page-link">上一页</a>
                            </li>
                            {% else %}
                            <li class="paginate_button page-item previous disabled">
                                <a href="#" aria-controls="example2" data-dt-idx="0" tabindex="0" class="page-link">上一页</a>
                            </li>
                            {% endif %}

                            {% if entries | length == 10 %}
                            <!-- 当前页面的项目数如果不等 10 也就是小于 10 个项目则不显示下一页 -->
                            <li class="paginate_button page-item previous">
                                <a href="/ChkAPIProjectView/{{ page + 1 }}" aria-controls="example2" data-dt-idx="0" tabindex="0" class="page-link">下一页</a>
                            </li>
                            {% else %}
                            <li class="paginate_button page-item previous disabled">
                                <a href="#" aria-controls="example2" data-dt-idx="0" tabindex="0" class="page-link">下一页</a>
                            </li>
                            {% endif %}
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </div>
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content -->
</div>
<!-- /.content-wrapper -->
{% include 'footer.html' %}